Rewrite most code to be much more structured
Write documentation
